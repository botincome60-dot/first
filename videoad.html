<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡¶π‡¶ú ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ - ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            padding-bottom: 20px;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .success-message {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .error-banner {
            background: linear-gradient(135deg, #FF416C 0%, #FF4B2B 100%);
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 15px;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50">
    
    <!-- Error Banner -->
    <div id="errorBanner" class="error-banner">
        <i class="fas fa-exclamation-triangle mr-2"></i>
        <span id="errorMessage">AdsGram ad ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ Simulation Mode ‡¶ö‡¶≤‡¶õ‡ßá‡•§</span>
    </div>

    <div class="container mx-auto px-4 py-4 fade-in">
        <!-- Success Message (Hidden by default) -->
        <div id="successMessage" class="hidden bg-gradient-to-r from-green-400 to-green-600 text-white p-4 rounded-xl mb-4 success-message">
            <div class="flex items-center">
                <i class="fas fa-check-circle text-2xl mr-3"></i>
                <div>
                    <h3 class="font-bold text-lg">üéâ ‡¶∏‡¶´‡¶≤!</h3>
                    <p id="successText">‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá</p>
                </div>
            </div>
        </div>

        <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-4 text-white mb-4">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="font-bold text-lg">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h2>
                    <p class="text-white/80 text-sm">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßá ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                    <p class="text-xs text-white/60 mt-1" id="resetTime">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
                </div>
                <i class="fas fa-play-circle text-2xl"></i>
            </div>
        </div>

        <!-- ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ -->
        <div class="bg-white rounded-xl p-4 shadow-sm mb-4 text-center">
            <div class="mb-4">
                <h3 class="font-bold text-lg mb-2">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶°</h3>
                <div class="text-4xl font-bold text-blue-600" id="adsCounter">‡ß¶/‡ßß‡ß¶</div>
                <p class="text-gray-500 text-sm mt-2" id="resetTimer">‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡ßü ‡ßß‡ß¶‡¶ü‡¶ø ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
            </div>
            
            <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
                <div id="progressBar" class="bg-green-500 h-3 rounded-full" style="width: 0%"></div>
            </div>
        </div>

        <!-- ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶è‡¶∞‡ßü‡¶æ -->
        <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
            <div class="text-center mb-4">
                <i class="fas fa-video text-yellow-500 text-4xl mb-3"></i>
                <h3 class="font-bold text-lg">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶°</h3>
                <p class="text-gray-600">‡¶è‡¶á ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶® <span class="font-bold text-green-600">‡ßß‡ß¶.‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span></p>
            </div>
            
            <div class="bg-gray-100 rounded-lg p-4 text-center mb-4">
                <h4 class="font-bold text-lg mb-2">üé¨  ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶°</h4>
                <p class="text-gray-600 mb-3">‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®, ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶™‡¶æ‡¶®</p>
                <p class="text-xs" id="adStatus">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§</p>
            </div>
            
            <!-- ‡¶¨‡¶æ‡¶ü‡¶® -->
            <button onclick="startVideoAd()" id="watchAdBtn" class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-bold text-lg mb-3 hover:from-green-600 hover:to-green-700 transition-colors">
                <i class="fas fa-play mr-2"></i>
                ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
            </button>
            
            <div class="text-center">
                <p class="text-gray-500 text-sm" id="rewardStatus">‡¶è‡¶° ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ö‡¶ü‡ßã ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá</p>
            </div>
        </div>

        <!-- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® -->
        <a href="tasks.html" class="w-full bg-gray-500 text-white py-3 rounded-xl font-bold text-center block mt-4 hover:bg-gray-600 transition-colors">
            <i class="fas fa-arrow-left mr-2"></i>
            ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßá‡¶ú‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
        </a>
    </div>

    <!-- AdsGram Script -->
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>

    <script>
        // AdsGram Block ID
        const BLOCK_ID = "int-18609";
        
        let isAdActive = false;
        let AdController = null;
        let isAdsGramWorking = false;
        
        // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶æ
        function loadData() {
            const now = new Date().getTime();
            
            // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞
            let videoAdsWatchedToday = localStorage.getItem('videoAdsWatchedToday') ? 
                parseInt(localStorage.getItem('videoAdsWatchedToday')) : 0;
            
            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü
            let firstVideoAdTime = localStorage.getItem('firstVideoAdTime');
            
            // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏
            let totalBalance = localStorage.getItem('totalBalance') ? 
                parseInt(localStorage.getItem('totalBalance')) : 0;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßá ‡¶•‡¶æ‡¶ï‡ßá
            if (!firstVideoAdTime && videoAdsWatchedToday === 0) {
                return {
                    videoAdsWatchedToday: 0,
                    totalBalance: totalBalance,
                    firstVideoAdTime: null,
                    resetTime: null
                };
            }
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Ü‡¶õ‡ßá
            if (!firstVideoAdTime && videoAdsWatchedToday > 0) {
                firstVideoAdTime = now.toString();
                localStorage.setItem('firstVideoAdTime', firstVideoAdTime);
            }
            
            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü
            const firstAdTimestamp = parseInt(firstVideoAdTime);
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ (‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü + ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ)
            const resetTime = firstAdTimestamp + 3600000;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶™‡¶æ‡¶∞ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü
            if (now >= resetTime) {
                // ‡¶∏‡¶¨ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                localStorage.setItem('videoAdsWatchedToday', '0');
                localStorage.removeItem('firstVideoAdTime');
                
                return {
                    videoAdsWatchedToday: 0,
                    totalBalance: totalBalance,
                    firstVideoAdTime: null,
                    resetTime: null
                };
            }
            
            return {
                videoAdsWatchedToday: videoAdsWatchedToday,
                totalBalance: totalBalance,
                firstVideoAdTime: firstAdTimestamp,
                resetTime: resetTime
            };
        }
        
        let userData = loadData();

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá
        document.addEventListener('DOMContentLoaded', function() {
            updateCounter();
            updateResetTimer();
            initializeAdsGram();
        });

        // AdsGram Initialize ‡¶ï‡¶∞‡ßã
        function initializeAdsGram() {
            if (typeof window.Adsgram === 'undefined') {
                console.error("AdsGram SDK not loaded");
                document.getElementById('modeInfo').textContent = "Mode: Simulation (SDK not loaded)";
                document.getElementById('modeInfo').className = "text-xs text-red-600";
                return;
            }
            
            try {
                AdController = window.Adsgram.init({ 
                    blockId: BLOCK_ID 
                });
                isAdsGramWorking = true;
                console.log(`‚úÖ AdsGram initialized with Block ID: ${BLOCK_ID}`);
                document.getElementById('modeInfo').textContent = `Mode: AdsGram Active (ID: ${BLOCK_ID})`;
                document.getElementById('modeInfo').className = "text-xs text-green-600";
            } catch (error) {
                console.log(`‚ùå AdsGram initialization failed:`, error);
                document.getElementById('modeInfo').textContent = "Mode: Simulation (AdsGram failed)";
                document.getElementById('modeInfo').className = "text-xs text-yellow-600";
                document.getElementById('errorBanner').style.display = 'block';
                document.getElementById('errorMessage').textContent = "AdsGram initialization failed. Simulation Mode ‡¶ö‡¶≤‡¶õ‡ßá‡•§";
            }
        }

        // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡¶¨‡ßá
        async function startVideoAd() {
            if (userData.videoAdsWatchedToday >= 10) {
                alert('‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑! ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }

            if (isAdActive) {
                return;
            }

            isAdActive = true;
            
            // Disable button and show loading
            const watchBtn = document.getElementById('watchAdBtn');
            watchBtn.disabled = true;
            watchBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            document.getElementById('adStatus').textContent = '‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            document.getElementById('adStatus').className = 'text-xs text-blue-600';
            
            // Hide previous messages
            document.getElementById('successMessage').classList.add('hidden');
            document.getElementById('errorBanner').style.display = 'none';
            
            try {
                // AdsGram ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶≤‡ßá AdsGram ad show ‡¶ï‡¶∞‡ßã
                if (isAdsGramWorking && AdController) {
                    console.log("Showing AdsGram ad...");
                    
                    await AdController.show();
                    
                    console.log("‚úÖ AdsGram ad shown successfully");
                    
                    // AdsGram ad ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡ßü‡ßá‡¶õ‡ßá, ‡¶è‡¶ñ‡¶® ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®
                    giveReward("AdsGram");
                    
                } else {
                    // AdsGram ‡¶®‡¶æ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶≤‡ßá simulation use ‡¶ï‡¶∞‡ßã
                    throw new Error("AdsGram not working");
                }
                
            } catch (error) {
                // AdsGram ad ‡¶¶‡ßá‡¶ñ‡¶æ‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶≤‡ßá simulation use ‡¶ï‡¶∞‡ßã
                console.error("AdsGram ad error:", error);
                
                // Error banner show ‡¶ï‡¶∞‡ßã
                document.getElementById('errorBanner').style.display = 'block';
                document.getElementById('errorMessage').textContent = "AdsGram ad ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ Simulation Mode ‡¶ö‡¶≤‡¶õ‡ßá‡•§";
                
                watchBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Simulation ‡¶ö‡¶≤‡¶õ‡ßá...';
                document.getElementById('adStatus').textContent = 'Simulation ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶ö‡¶≤‡¶õ‡ßá...';
                document.getElementById('adStatus').className = 'text-xs text-yellow-600';
                
                // Simulation ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø 2 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßã
                setTimeout(() => {
                    giveReward("Simulation");
                }, 2000);
            }
        }

        // ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®
        function giveReward(mode) {
            // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡ßú‡¶æ‡¶ì
            userData.videoAdsWatchedToday++;
            userData.totalBalance += 10;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶π‡ßü
            if (!userData.firstVideoAdTime) {
                const now = new Date().getTime();
                userData.firstVideoAdTime = now;
                userData.resetTime = now + 3600000;
                localStorage.setItem('firstVideoAdTime', now.toString());
            }
            
            // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßã
            localStorage.setItem('videoAdsWatchedToday', userData.videoAdsWatchedToday);
            localStorage.setItem('totalBalance', userData.totalBalance);
            
            // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
            updateCounter();
            updateResetTimer();
            
            // ‡¶∏‡¶´‡¶≤ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú
            document.getElementById('adStatus').textContent = '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá';
            document.getElementById('adStatus').className = 'text-xs text-green-600';
            document.getElementById('rewardStatus').textContent = '‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!';
            document.getElementById('rewardStatus').className = 'text-sm text-green-600 font-semibold';
            
            // ‡¶¨‡¶æ‡¶ü‡¶® ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
            const watchBtn = document.getElementById('watchAdBtn');
            watchBtn.innerHTML = '<i class="fas fa-check mr-2"></i>‡¶∏‡¶´‡¶≤! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá';
            watchBtn.classList.remove('from-green-500', 'to-green-600');
            watchBtn.classList.add('bg-green-500');
            
            // Success message show ‡¶ï‡¶∞‡ßã
            document.getElementById('successText').textContent = 
                `${mode === "AdsGram" ? "AdsGram" : "Simulation"} ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§`;
            document.getElementById('successMessage').classList.remove('hidden');
            
            // Error banner hide ‡¶ï‡¶∞‡ßã
            document.getElementById('errorBanner').style.display = 'none';
            
            // ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
            setTimeout(() => {
                resetAdButton();
                document.getElementById('successMessage').classList.add('hidden');
            }, 3000);
            
            isAdActive = false;
        }

        function updateCounter() {
            document.getElementById('adsCounter').textContent = `${userData.videoAdsWatchedToday}/‡ßß‡ß¶`;
            const progress = (userData.videoAdsWatchedToday / 10) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑ ‡¶π‡ßü
            if (userData.videoAdsWatchedToday >= 10) {
                const watchBtn = document.getElementById('watchAdBtn');
                watchBtn.disabled = true;
                watchBtn.innerHTML = '<i class="fas fa-clock mr-2"></i>‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑';
                watchBtn.classList.remove('from-green-500', 'to-green-600');
                watchBtn.classList.add('bg-gray-400');
                document.getElementById('adStatus').textContent = '‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑';
                document.getElementById('adStatus').className = 'text-xs text-red-600';
            }
        }

        function updateResetTimer() {
            const now = new Date().getTime();
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ñ‡¶®‡¶ì ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßá ‡¶•‡¶æ‡¶ï‡ßá
            if (!userData.firstVideoAdTime) {
                document.getElementById('resetTimer').textContent = '‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá';
                document.getElementById('resetTime').textContent = '‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ‡¶è‡¶ñ‡¶®‡¶ì ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡ßü‡¶®‡¶ø';
                return;
            }
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ
            const resetTime = userData.resetTime;
            const timeLeft = resetTime - now;
            
            if (timeLeft <= 0) {
                document.getElementById('resetTimer').textContent = '‡¶è‡¶ñ‡¶®‡¶á ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶π‡¶¨‡ßá';
                document.getElementById('resetTime').textContent = '‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ‡¶è‡¶ñ‡¶®‡¶á';
                
                // ‡¶Ö‡¶ü‡ßã ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü
                setTimeout(() => {
                    userData = loadData();
                    updateCounter();
                    updateResetTimer();
                }, 1000);
                return;
            }
            
            const minutesLeft = Math.floor(timeLeft / 60000);
            const secondsLeft = Math.floor((timeLeft % 60000) / 1000);
            
            document.getElementById('resetTimer').textContent = `‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ${minutesLeft} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ${secondsLeft} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞`;
            document.getElementById('resetTime').textContent = `‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ${minutesLeft} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü ${secondsLeft} ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞`;
        }

        function resetAdButton() {
            if (userData.videoAdsWatchedToday < 10) {
                const watchBtn = document.getElementById('watchAdBtn');
                watchBtn.disabled = false;
                watchBtn.innerHTML = '<i class="fas fa-play mr-2"></i>AdsGram ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
                watchBtn.classList.remove('bg-green-500', 'bg-gray-400');
                watchBtn.classList.add('bg-gradient-to-r', 'from-green-500', 'to-green-600');
                document.getElementById('adStatus').textContent = '‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§';
                document.getElementById('adStatus').className = 'text-xs text-gray-400';
                document.getElementById('rewardStatus').textContent = '‡¶è‡¶° ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Ö‡¶ü‡ßã ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá';
                document.getElementById('rewardStatus').className = 'text-gray-500 text-sm';
                
                // Error banner hide ‡¶ï‡¶∞‡ßã
                document.getElementById('errorBanner').style.display = 'none';
            }
        }

        // ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
        setInterval(updateResetTimer, 1000);
    </script>
</body>
</html>
