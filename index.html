<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>সহজ ইনকাম - হোম</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <style>
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        body {
            padding-bottom: 70px;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-4">
        <!-- হেডার -->
        <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-4 text-white mb-4">
            <div class="flex items-center space-x-3 mb-3">
                <div class="w-12 h-12 bg-white/20 rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-xl"></i>
                </div>
                <div>
                    <h2 class="font-bold text-lg" id="userName">লোড হচ্ছে...</h2>
                    <p class="text-white/80 text-sm">আপনার প্রোফাইল</p>
                </div>
            </div>
            
            <div class="bg-white/10 rounded-xl p-3">
                <p class="text-sm">মেইন ব্যালেন্স</p>
                <h1 class="text-2xl font-bold" id="mainBalance">0.00 টাকা</h1>
            </div>
        </div>

        <!-- আজকের স্ট্যাটাস -->
        <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-white rounded-xl p-3 shadow-sm">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">আজকের এডস</p>
                        <h3 class="font-bold text-lg" id="todayAds">0/10</h3>
                    </div>
                    <i class="fas fa-eye text-blue-500"></i>
                </div>
            </div>
            
            <div class="bg-white rounded-xl p-3 shadow-sm">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">মোট রেফারেল</p>
                        <h3 class="font-bold text-lg" id="totalReferrals">0</h3>
                    </div>
                    <i class="fas fa-users text-green-500"></i>
                </div>
            </div>
            
            <div class="bg-white rounded-xl p-3 shadow-sm">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">মোট এডস</p>
                        <h3 class="font-bold text-lg" id="totalAds">0</h3>
                    </div>
                    <i class="fas fa-chart-line text-purple-500"></i>
                </div>
            </div>
            
            <div class="bg-white rounded-xl p-3 shadow-sm">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">মোট ইনকাম</p>
                        <h3 class="font-bold text-lg" id="totalIncome">0.00 টাকা</h3>
                    </div>
                    <i class="fas fa-wallet text-yellow-500"></i>
                </div>
            </div>
        </div>

        <!-- দ্রুত একশন -->
        <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
            <h3 class="font-bold text-lg mb-3">দ্রুত একশন</h3>
            <div class="grid grid-cols-2 gap-3">
                <a href="tasks.html" class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-center">
                    <i class="fas fa-tasks text-blue-500 text-xl mb-1"></i>
                    <p class="font-semibold text-blue-700">টাস্ক করুন</p>
                </a>
                <a href="support.html" class="bg-green-50 border border-green-200 rounded-lg p-3 text-center">
                    <i class="fas fa-hand-holding-usd text-green-500 text-xl mb-1"></i>
                    <p class="font-semibold text-green-700">উইথড্র</p>
                </a>
            </div>
        </div>

        <!-- রেফারেল সেকশন -->
        <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-4 text-white">
            <h3 class="font-bold text-lg mb-2">বন্ধুকে রেফার করুন</h3>
            <p class="text-white/90 text-sm mb-3">প্রতি রেফারেলে পাবেন ১০০ টাকা</p>
            
            <div class="bg-white/10 rounded-lg p-3 mb-3">
                <p class="text-xs mb-1">আপনার রেফারেল লিঙ্ক</p>
                <div class="flex items-center justify-between">
                    <code class="text-sm font-mono break-all" id="referralLink">লোড হচ্ছে...</code>
                    <button onclick="copyReferralLink()" class="bg-white text-green-600 px-3 py-1 rounded text-sm font-semibold ml-2 whitespace-nowrap">
                        কপি
                    </button>
                </div>
            </div>
            
            <div class="bg-white/10 rounded-lg p-3">
                <p class="text-sm">আপনার মোট রেফারেল: <span class="font-bold" id="totalReferrals2">0</span> জন</p>
            </div>
        </div>
    </div>

    <!-- বটম নেভিগেশন -->
    <div class="bottom-nav">
        <div class="grid grid-cols-4 gap-1 p-2">
            <a href="index.html" class="flex flex-col items-center p-2 text-blue-600">
                <i class="fas fa-home mb-1"></i>
                <span class="text-xs">হোম</span>
            </a>
            <a href="tasks.html" class="flex flex-col items-center p-2 text-gray-500">
                <i class="fas fa-tasks mb-1"></i>
                <span class="text-xs">টাস্ক</span>
            </a>
            <a href="support.html" class="flex flex-col items-center p-2 text-gray-500">
                <i class="fas fa-headset mb-1"></i>
                <span class="text-xs">সাপোর্ট</span>
            </a>
            <a href="profile.html" class="flex flex-col items-center p-2 text-gray-500">
                <i class="fas fa-user mb-1"></i>
                <span class="text-xs">প্রোফাইল</span>
            </a>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // হোম পেজের বিশেষ ফাংশনালিটি
        function initHomePage() {
            const user = getUserData();
            if (user) {
                document.getElementById('userName').textContent = user.first_name || 'ইউজার';
                document.getElementById('mainBalance').textContent = user.balance.toFixed(2) + ' টাকা';
                document.getElementById('todayAds').textContent = user.today_ads + '/10';
                document.getElementById('totalReferrals').textContent = user.total_referrals;
                document.getElementById('totalReferrals2').textContent = user.total_referrals;
                document.getElementById('totalAds').textContent = user.total_ads;
                document.getElementById('totalIncome').textContent = user.total_income.toFixed(2) + ' টাকা';
                
                // Referral link immediately set
                document.getElementById('referralLink').textContent = generateReferralLink();
                
                // Load fresh referral count from Firebase
                setTimeout(() => {
                    updateReferralDisplay();
                }, 1500);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            initHomePage();
        });
    </script>
</body>
</html>