<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∏‡¶π‡¶ú ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ - ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            padding-bottom: 20px;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
            <p class="text-gray-600">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>
    </div>

    <div class="container mx-auto px-4 py-4 fade-in">
        <!-- ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
        <div class="bg-gradient-to-r from-orange-600 to-yellow-600 rounded-2xl p-4 text-white mb-4">
            <div class="flex items-center justify-between">
                <div>
                    <h2 class="font-bold text-lg">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</h2>
                    <p class="text-white/80 text-sm">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßá ‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶Ü‡ßü ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                </div>
                <i class="fas fa-star text-2xl"></i>
            </div>
        </div>

        <!-- ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ -->
        <div class="bg-white rounded-xl p-4 shadow-sm mb-4 text-center">
            <div class="mb-4">
                <h3 class="font-bold text-lg mb-2">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü</h3>
                <div class="text-4xl font-bold text-orange-600" id="bonusAdsCounter">‡ß¶/‡ßß‡ß¶</div>
                <p class="text-gray-500 text-sm mt-2" id="bonusResetTimer">‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡ßü ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
            </div>
            
            <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
                <div id="bonusProgressBar" class="bg-orange-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
        </div>

        <!-- ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶è‡¶∞‡¶ø‡ßü‡¶æ -->
        <div class="bg-white rounded-xl p-4 shadow-sm mb-4">
            <div class="text-center mb-4">
                <i class="fas fa-star text-yellow-500 text-4xl mb-3"></i>
                <h3 class="font-bold text-lg">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶° ‡¶è‡¶°</h3>
                <p class="text-gray-600">‡¶è‡¶á ‡¶è‡¶°‡¶ü‡¶ø ‡¶¶‡ßá‡¶ñ‡ßá ‡¶™‡¶æ‡¶¨‡ßá‡¶® <span class="font-bold text-green-600">‡ßß‡ß¶.‡ß¶‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span> ‡¶¨‡ßã‡¶®‡¶æ‡¶∏</p>
            </div>
            
            <!-- ‡¶è‡¶° ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶∞‡¶ø‡ßü‡¶æ -->
            <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 text-center mb-4">
                <div id="bonusAdContent">
                    <h4 class="font-bold text-lg mb-2">üé¨ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶∞‡¶ø‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°‡ßá‡¶° ‡¶è‡¶°</h4>
                    <p class="text-gray-600 mb-3">‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶®</p>
                    
                    <div class="bg-white p-4 rounded-lg border border-orange-300">
                        <i class="fas fa-ad text-orange-500 text-3xl mb-2"></i>
                        <p class="text-sm text-gray-500 mb-3">‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶®</p>
                        <p class="text-xs text-gray-400" id="bonusAdStatus">‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§</p>
                    </div>
                </div>
            </div>
            
            <!-- ‡¶¨‡¶æ‡¶ü‡¶® -->
            <button onclick="showBonusAd()" id="watchBonusAdBtn" class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-bold text-lg mb-3 hover:from-orange-600 hover:to-orange-700 transition-colors">
                <i class="fas fa-play mr-2"></i>
                ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
            </button>
            
            <div class="text-center">
                <p class="text-gray-500 text-sm" id="bonusRewardStatus">‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá</p>
            </div>
        </div>

        <!-- ‡¶§‡¶•‡ßç‡¶Ø -->
        <div class="bg-orange-50 border border-orange-200 rounded-xl p-4">
            <div class="flex items-start">
                <i class="fas fa-info-circle text-orange-500 mt-1 mr-2"></i>
                <div>
                    <h4 class="font-semibold text-orange-700">‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø</h4>
                    <p class="text-orange-600 text-sm">‚Ä¢ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ö‡¶ü‡ßã ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá</p>
                    <p class="text-orange-600 text-sm">‚Ä¢ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡ßü ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶®</p>
                    <p class="text-orange-600 text-sm">‚Ä¢ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶∏‡¶Æ‡ßü ‡¶≤‡¶æ‡¶ó‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá</p>
                    <p class="text-orange-600 text-sm">‚Ä¢ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ï‡¶æ‡¶®‡ßá‡¶ï‡¶∂‡¶® ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
                </div>
            </div>
        </div>

        <!-- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï ‡¶¨‡¶æ‡¶ü‡¶® -->
        <a href="tasks.html" class="w-full bg-gray-500 text-white py-3 rounded-xl font-bold text-center block mt-4 hover:bg-gray-600 transition-colors">
            <i class="fas fa-arrow-left mr-2"></i>
            ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶™‡ßá‡¶ú‡ßá ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶®
        </a>
    </div>

    <!-- AdsGram Script -->
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>

    <script>
        // AdsGram Block ID
        const BLOCK_ID = "18607";
        
        let isBonusAdLoading = false;
        let AdController = null;
        let isAdsGramAvailable = false;
        
        // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶•‡ßá‡¶ï‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡¶ø‡ßü‡ßá ‡¶Ü‡¶∏‡¶æ
        function loadData() {
            const now = new Date().getTime();
            
            // ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞
            let bonusAdsWatchedToday = localStorage.getItem('bonusAdsWatchedToday') ? 
                parseInt(localStorage.getItem('bonusAdsWatchedToday')) : 0;
            
            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü
            let firstBonusAdTime = localStorage.getItem('firstBonusAdTime');
            
            // ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏
            let totalBalance = localStorage.getItem('totalBalance') ? 
                parseInt(localStorage.getItem('totalBalance')) : 0;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßá ‡¶•‡¶æ‡¶ï‡ßá
            if (!firstBonusAdTime && bonusAdsWatchedToday === 0) {
                return {
                    bonusAdsWatchedToday: 0,
                    totalBalance: totalBalance,
                    firstBonusAdTime: null,
                    resetTime: null
                };
            }
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Ü‡¶õ‡ßá
            if (!firstBonusAdTime && bonusAdsWatchedToday > 0) {
                firstBonusAdTime = now.toString();
                localStorage.setItem('firstBonusAdTime', firstBonusAdTime);
            }
            
            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü
            const firstAdTimestamp = parseInt(firstBonusAdTime);
            
            // ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ (‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü + ‡ßß ‡¶ò‡¶®‡ßç‡¶ü‡¶æ)
            const resetTime = firstAdTimestamp + 3600000;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ü‡¶æ‡¶á‡¶Æ ‡¶™‡¶æ‡¶∞ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡ßü
            if (now >= resetTime) {
                // ‡¶∏‡¶¨ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                localStorage.setItem('bonusAdsWatchedToday', '0');
                localStorage.removeItem('firstBonusAdTime');
                
                return {
                    bonusAdsWatchedToday: 0,
                    totalBalance: totalBalance,
                    firstBonusAdTime: null,
                    resetTime: null
                };
            }
            
            return {
                bonusAdsWatchedToday: bonusAdsWatchedToday,
                totalBalance: totalBalance,
                firstBonusAdTime: firstAdTimestamp,
                resetTime: resetTime
            };
        }
        
        let userData = loadData();

        // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá
        document.addEventListener('DOMContentLoaded', function() {
            updateBonusCounter();
            updateBonusResetTimer();
            checkAdsGram();
            hideLoading();
        });

        // AdsGram ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßã
        function checkAdsGram() {
            if (typeof window.Adsgram === 'undefined') {
                console.log("AdsGram SDK not loaded");
                return;
            }
            
            try {
                AdController = window.Adsgram.init({ 
                    blockId: BLOCK_ID 
                });
                isAdsGramAvailable = true;
                console.log("AdsGram available");
            } catch (error) {
                console.log("AdsGram initialization failed:", error);
            }
        }

        function updateBonusCounter() {
            document.getElementById('bonusAdsCounter').textContent = `${userData.bonusAdsWatchedToday}/‡ßß‡ß¶`;
            const progress = (userData.bonusAdsWatchedToday / 10) * 100;
            document.getElementById('bonusProgressBar').style.width = `${progress}%`;
            
            // Check if user can watch more bonus ads
            if (!canWatchMoreBonusAds()) {
                document.getElementById('watchBonusAdBtn').disabled = true;
                document.getElementById('watchBonusAdBtn').classList.remove('bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'hover:from-orange-600', 'hover:to-orange-700');
                document.getElementById('watchBonusAdBtn').classList.add('bg-gray-400', 'cursor-not-allowed');
                document.getElementById('watchBonusAdBtn').innerHTML = '<i class="fas fa-clock mr-2"></i>‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑ - ' + getTimeUntilNextBonusReset() + ' ‡¶™‡¶∞';
            } else {
                document.getElementById('watchBonusAdBtn').disabled = false;
                document.getElementById('watchBonusAdBtn').classList.remove('bg-gray-400', 'cursor-not-allowed');
                document.getElementById('watchBonusAdBtn').classList.add('bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'hover:from-orange-600', 'hover:to-orange-700');
                document.getElementById('watchBonusAdBtn').innerHTML = '<i class="fas fa-play mr-2"></i>‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
            }
        }

        function updateBonusResetTimer() {
            const resetTimer = document.getElementById('bonusResetTimer');
            const timeUntilReset = getTimeUntilNextBonusReset();
            resetTimer.textContent = `‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶ò‡¶®‡ßç‡¶ü‡¶æ‡ßü ‡ßß‡ß¶‡¶ü‡¶ø ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶¨‡ßá‡¶® (‡¶∞‡¶ø‡¶∏‡ßá‡¶ü: ${timeUntilReset})`;
        }

        function canWatchMoreBonusAds() {
            if (!userData.firstBonusAdTime) {
                return true;
            }
            
            const lastReset = new Date(userData.firstBonusAdTime);
            const now = new Date();
            const hoursDiff = (now - lastReset) / (1000 * 60 * 60);
            
            // If 1 hour has passed, user can watch bonus ads again
            if (hoursDiff >= 1) {
                return true;
            }
            
            // Check if user hasn't reached the hourly limit
            return userData.bonusAdsWatchedToday < 10;
        }

        function getTimeUntilNextBonusReset() {
            if (!userData.firstBonusAdTime) {
                return '‡¶è‡¶ñ‡¶®‡¶á ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®';
            }
            
            const lastReset = new Date(userData.firstBonusAdTime);
            const now = new Date();
            const nextReset = new Date(lastReset.getTime() + (60 * 60 * 1000));
            const timeDiff = nextReset - now;
            
            if (timeDiff <= 0) {
                return '‡¶è‡¶ñ‡¶®‡¶á ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶π‡¶¨‡ßá';
            }
            
            const minutes = Math.ceil(timeDiff / (1000 * 60));
            const hours = Math.floor(minutes / 60);
            const remainingMinutes = minutes % 60;
            
            if (hours > 0) {
                return `${hours} ‡¶ò‡¶®‡ßç‡¶ü‡¶æ ${remainingMinutes} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü`;
            } else {
                return `${minutes} ‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü`;
            }
        }

        async function showBonusAd() {
            if (!canWatchMoreBonusAds()) {
                alert(`‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶∂‡ßá‡¶∑! ${getTimeUntilNextBonusReset()} ‡¶™‡¶∞ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§`);
                return;
            }

            if (isBonusAdLoading) {
                return;
            }

            isBonusAdLoading = true;
            const watchBtn = document.getElementById('watchBonusAdBtn');
            watchBtn.disabled = true;
            watchBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            document.getElementById('bonusAdStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';
            document.getElementById('bonusAdStatus').className = 'text-xs text-blue-600';

            try {
                // AdsGram available ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ad show ‡¶ï‡¶∞‡ßã
                if (isAdsGramAvailable && AdController) {
                    await AdController.show();
                    
                    // AdsGram ad ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶π‡ßü‡ßá‡¶õ‡ßá, ‡¶è‡¶ñ‡¶® ‡¶∞‡¶ø‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®
                    rewardUserForBonusAd();
                    
                } else {
                    // AdsGram ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá error throw ‡¶ï‡¶∞‡ßã
                    throw new Error("‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø");
                }
                
            } catch (error) {
                // AdsGram ad ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡¶≤‡ßá error show ‡¶ï‡¶∞‡ßã ‡¶è‡¶¨‡¶Ç count/tk add ‡¶π‡¶¨‡ßá ‡¶®‡¶æ
                console.error("Bonus ad error:", error);
                
                document.getElementById('bonusAdStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('bonusAdStatus').className = 'text-xs text-red-600';
                document.getElementById('bonusRewardStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®';
                document.getElementById('bonusRewardStatus').className = 'text-sm text-red-600 font-semibold';
                
                watchBtn.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i>‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø';
                watchBtn.classList.remove('ad-loading', 'bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'hover:from-orange-600', 'hover:to-orange-700');
                watchBtn.classList.add('bg-red-500');
                
                alert('‚ùå ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡¶®‡¶ø! ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                
                // ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
                setTimeout(() => {
                    resetBonusAdButton();
                }, 3000);
                
                isBonusAdLoading = false;
                return; // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá return ‡¶ï‡¶∞‡ßã ‡¶Ø‡¶æ‡¶§‡ßá reward ‡¶®‡¶æ ‡¶¶‡ßá‡ßü
            }
        }

        async function rewardUserForBonusAd() {
            // ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶¨‡¶æ‡ßú‡¶æ‡¶ì
            userData.bonusAdsWatchedToday++;
            userData.totalBalance += 10;
            
            // ‡¶Ø‡¶¶‡¶ø ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶π‡ßü
            if (!userData.firstBonusAdTime) {
                const now = new Date().getTime();
                userData.firstBonusAdTime = now;
                userData.resetTime = now + 3600000;
                localStorage.setItem('firstBonusAdTime', now.toString());
            }
            
            // ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßã
            localStorage.setItem('bonusAdsWatchedToday', userData.bonusAdsWatchedToday);
            localStorage.setItem('totalBalance', userData.totalBalance);
            
            // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡ßã
            updateBonusCounter();
            updateBonusResetTimer();
            
            // Success message
            document.getElementById('bonusAdStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá';
            document.getElementById('bonusAdStatus').className = 'text-xs text-green-600';
            document.getElementById('bonusRewardStatus').textContent = '‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!';
            document.getElementById('bonusRewardStatus').className = 'text-sm text-green-600 font-semibold';
            
            const watchBtn = document.getElementById('watchBonusAdBtn');
            watchBtn.innerHTML = '<i class="fas fa-check mr-2"></i>‡¶∏‡¶´‡¶≤! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡ßá‡¶õ‡ßá';
            watchBtn.classList.remove('ad-loading', 'bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'hover:from-orange-600', 'hover:to-orange-700');
            watchBtn.classList.add('bg-green-500');
            
            alert('üéâ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®! ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§');
            
            // Reset button after 3 seconds
            setTimeout(() => {
                if (canWatchMoreBonusAds()) {
                    resetBonusAdButton();
                }
                isBonusAdLoading = false;
            }, 3000);
        }

        function resetBonusAdButton() {
            if (canWatchMoreBonusAds()) {
                const watchBtn = document.getElementById('watchBonusAdBtn');
                watchBtn.innerHTML = '<i class="fas fa-play mr-2"></i>‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®';
                watchBtn.classList.remove('bg-green-500', 'bg-red-500', 'ad-loading');
                watchBtn.classList.add('bg-gradient-to-r', 'from-orange-500', 'to-orange-600', 'hover:from-orange-600', 'hover:to-orange-700');
                watchBtn.disabled = false;
                document.getElementById('bonusAdStatus').textContent = '‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶è‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§';
                document.getElementById('bonusAdStatus').className = 'text-xs text-gray-400';
                document.getElementById('bonusRewardStatus').textContent = '‡¶è‡¶° ‡¶¶‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡ßß‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶Ø‡ßã‡¶ó ‡¶π‡¶¨‡ßá';
                document.getElementById('bonusRewardStatus').className = 'text-gray-500 text-sm';
            }
        }

        function hideLoading() {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        // Update reset timer every minute
        setInterval(updateBonusResetTimer, 60000);
    </script>
</body>
</html>